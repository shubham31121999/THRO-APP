{% extends 'base.html' %}

{% block content %}
<style>
    body {
        margin: 0;
        font-family: Arial, sans-serif;
        background-color: #e0e6ed;
    }

    .card-vendor {
        width: 100%;
        margin-top: 50px;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }
</style>



<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card-vendor">
                <h1 class="card-title">Add Vendor</h1>
                <form id="addVendorForm" action="{% url 'addVendor' %}" method="post">
                    {% csrf_token %}
                    
                    <label for="vendorName">Vendor Name:</label>
                    <input type="text" id="vendorName" name="vendorName" maxlength="100" required class="form-control"><br>
                    
                    <label for="vendorAddress">Vendor Address:</label>
                    <input type="text" id="vendorAddress" name="vendorAddress" maxlength="200" required class="form-control"><br>
                    
                    <label for="vendorGstNumber">Vendor GST Number:</label>
                    <input type="text" id="vendorGstNumber" name="vendorGstNumber" maxlength="50" required class="form-control"><br>
                    
                    <label for="vendorPhoneNumber">Vendor Phone Number:</label>
                    <input type="number" id="vendorPhoneNumber" name="vendorPhoneNumber" maxlength="20" required class="form-control"><br>
                    
                    <button type="submit" class="btn btn-primary">Save Vendor</button>
                </form>
            </div>
        </div>
    </div>
</div>

    

    <script>
        document.getElementById('addVendorForm').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally
            
            // Collect form data
            let formData = new FormData(this);
            
            // Submit the form using fetch API
            fetch(this.action, {
                method: this.method,
                body: formData,
                headers: {
                    'Accept': 'application/json',
                    'X-Requested-With': 'XMLHttpRequest',
                    'X-CSRFToken': formData.get('csrfmiddlewaretoken')
                }
            })
            .then(response => response.json())
            .then(data => {
                // Handle JSON response
                if (data.success) {
                    alert('Vendor added successfully!'); // Replace with your preferred success notification (e.g., modal)
                    // Reset form if needed
                    this.reset();
                } else {
                    alert('Failed to add vendor. Please check your input.'); // Replace with your preferred error notification
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('An error occurred. Please try again later.'); // Replace with your preferred error handling
            });
        });
    </script>
{% endblock %}